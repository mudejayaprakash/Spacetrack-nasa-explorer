<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SpaceTrack - Your gateway to NASA space mission data and exploration">
    <title>SpaceTrack - NASA Space Data Explorer</title>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Shared Stylesheet -->
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
    <!-- Navigation -->
    <header class="site-header">
        <nav class="nav">
            <a class="logo" href="./index.html">
                <i class="fa-solid fa-rocket"></i>
                <span>SpaceTrack</span>
            </a>

            <button class="mobile-menu-btn" aria-label="Open menu">
                <i class="fa-solid fa-bars"></i>
            </button>

            <ul class="nav-links">
                <li><a href="./index.html" class="active"><i class="fa-solid fa-home"></i> Home</a></li>
                <li><a href="./data-visualization.html"><i class="fa-solid fa-chart-column"></i> Data Dashboard</a></li>
                <li><a href="./nasa-data.html"><i class="fa-solid fa-satellite"></i> NASA Live Data</a></li>
                <li><a href="./about.html"><i class="fa-solid fa-users"></i> About Us</a></li>
                <li class="crud">
                    <button class="crud-toggle" aria-haspopup="true" aria-expanded="false">
                        CRUD <i class="fa-solid fa-caret-down"></i>
                    </button>
                    <ul class="crud-menu">
                        <li><a href="./crud/create.html"><i class="fa-solid fa-plus"></i> Create</a></li>
                        <li><a href="./crud/read.html"><i class="fa-solid fa-eye"></i> Read</a></li>
                        <li><a href="./crud/update.html"><i class="fa-solid fa-pen"></i> Update</a></li>
                        <li><a href="./crud/delete.html"><i class="fa-solid fa-trash"></i> Delete</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Hero Section -->
            <div class="hero">
                <h1><i class="fa-solid fa-rocket"></i> Welcome to SpaceTrack</h1>
                <p>Your comprehensive platform for exploring NASA space missions and real-time space data</p>
                <div class="hero-stats">
                    <div class="stat-badge">
                        <i class="fa-solid fa-satellite-dish"></i>
                        <span id="heroActivities">10</span> Activities Tracked
                    </div>
                    <div class="stat-badge">
                        <i class="fa-solid fa-rocket"></i>
                        <span id="heroMissions">8</span> Active Missions
                    </div>
                    <div class="stat-badge">
                        <i class="fa-solid fa-chart-line"></i>
                        Live NASA Data
                    </div>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="stats-compact" id="quickStats" style="display: none;">
                <div class="stat-item">
                    <i class="fa-solid fa-satellite-dish stat-icon-compact" style="color: #3b82f6;"></i>
                    <div class="stat-content-compact">
                        <div class="stat-value-compact" id="totalActivities">0</div>
                        <div class="stat-label-compact">Total Activities</div>
                    </div>
                </div>
                
                <div class="stat-item">
                    <i class="fa-solid fa-rocket stat-icon-compact" style="color: #10b981;"></i>
                    <div class="stat-content-compact">
                        <div class="stat-value-compact" id="totalMissions">0</div>
                        <div class="stat-label-compact">Missions</div>
                    </div>
                </div>
                
                <div class="stat-item">
                    <i class="fa-solid fa-image stat-icon-compact" style="color: #f59e0b;"></i>
                    <div class="stat-content-compact">
                        <div class="stat-value-compact" id="totalImages">0</div>
                        <div class="stat-label-compact">Images</div>
                    </div>
                </div>
                
                <div class="stat-item">
                    <i class="fa-solid fa-flask stat-icon-compact" style="color: #8b5cf6;"></i>
                    <div class="stat-content-compact">
                        <div class="stat-value-compact" id="totalObservations">0</div>
                        <div class="stat-label-compact">Observations</div>
                    </div>
                </div>
            </div>

            <!-- Feature Cards -->
            <div class="card-grid">
                <!-- CRUD Operations -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <i class="fa-solid fa-database"></i>
                        </div>
                        <div>
                            <h2>CRUD Operations</h2>
                        </div>
                    </div>
                    <p>Manage space observation activities with full Create, Read, Update, and Delete capabilities. Track missions, observations, and imagery from various NASA programs.</p>
                    <div class="btn-group" style="margin-top: 1.5rem;">
                        <a href="./crud/create.html" class="btn btn-success btn-xs">
                            <i class="fa-solid fa-plus"></i> Create
                        </a>
                        <a href="./crud/read.html" class="btn btn-primary btn-xs">
                            <i class="fa-solid fa-eye"></i> View All
                        </a>
                    </div>
                </div>

                <!-- Data Visualization -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <i class="fa-solid fa-chart-line"></i>
                        </div>
                        <div>
                            <h2>Data Analytics</h2>
                        </div>
                    </div>
                    <p>Interactive charts and visualizations showing activity trends, mission distributions, and timeline analysis. Real-time insights from your space observation database.</p>
                    <div class="btn-group" style="margin-top: 1.5rem;">
                        <a href="./data-visualization.html" class="btn btn-primary btn-xs">
                            <i class="fa-solid fa-chart-column"></i> View Dashboard
                        </a>
                    </div>
                </div>

                <!-- NASA APIs -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <i class="fa-solid fa-satellite"></i>
                        </div>
                        <div>
                            <h2>NASA Live Data</h2>
                        </div>
                    </div>
                    <p>Real-time integration with NASA's public APIs. Access astronomy pictures, track near-Earth asteroids, and monitor the International Space Station's location.</p>
                    <div class="btn-group" style="margin-top: 1.5rem;">
                        <a href="./nasa-data.html" class="btn btn-primary btn-xs">
                            <i class="fa-solid fa-satellite"></i> Explore APIs
                        </a>
                    </div>
                </div>
            </div>

            <!-- Current Missions Grid -->
            <div class="card">
                <h2 style="margin-bottom: 1.5rem;">
                    <i class="fa-solid fa-rocket"></i> Active NASA Missions
                </h2>
                <div id="missionsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem;">
                    <div style="text-align: center; padding: 2rem;">
                        <i class="fa-solid fa-spinner fa-spin" style="font-size: 2rem; color: var(--primary);"></i>
                        <p style="margin-top: 1rem; color: var(--text-muted);">Loading missions...</p>
                    </div>
                </div>
            </div>

            <!-- Recent Activities -->
            <div class="card">
                <h2 style="margin-bottom: 1.5rem;">
                    <i class="fa-solid fa-clock-rotate-left"></i> Recent Activities
                </h2>
                <div class="table-wrapper">
                    <table class="table" id="recentActivitiesTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Mission</th>
                                <th>Type</th>
                                <th>Title</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="5" style="text-align: center; padding: 2rem;">
                                    <i class="fa-solid fa-spinner fa-spin"></i> Loading activities...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="btn-group">
                    <a href="./crud/read.html" class="btn btn-secondary">
                        <i class="fa-solid fa-eye"></i> View All Activities
                    </a>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="card">
                <h2 style="margin-bottom: 1.5rem;">
                    <i class="fa-solid fa-bolt"></i> Quick Actions
                </h2>
                <div class="crud-grid">
                    <a href="./crud/create.html" class="crud-btn">
                        <i class="fa-solid fa-plus"></i>
                        <span>Create Activity</span>
                        <small>Add new space observation</small>
                    </a>
                    <a href="./data-visualization.html" class="crud-btn read">
                        <i class="fa-solid fa-chart-column"></i>
                        <span>View Analytics</span>
                        <small>Interactive data dashboard</small>
                    </a>
                    <a href="./nasa-data.html" class="crud-btn update">
                        <i class="fa-solid fa-satellite"></i>
                        <span>NASA Live Data</span>
                        <small>Real-time space information</small>
                    </a>
                    <a href="./about.html" class="crud-btn delete">
                        <i class="fa-solid fa-users"></i>
                        <span>About Us</span>
                        <small>Project team & details</small>
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4><i class="fa-solid fa-rocket"></i> SpaceTrack</h4>
                <ul>
                    <li>NASA Space Data Explorer</li>
                    <li>Mission Analytics & Visualizations</li>
                    <li>Built for ISM 6225</li>
                    <li>University of South Florida</li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Navigation</h4>
                <ul>
                    <li><a href="./index.html">Home</a></li>
                    <li><a href="./data-visualization.html">Data Dashboard</a></li>
                    <li><a href="./nasa-data.html">NASA Live Data</a></li>
                    <li><a href="./about.html">About Us</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>CRUD Operations</h4>
                <ul>
                    <li><a href="./crud/create.html">Create Activity</a></li>
                    <li><a href="./crud/read.html">Read Activities</a></li>
                    <li><a href="./crud/update.html">Update Activity</a></li>
                    <li><a href="./crud/delete.html">Delete Activity</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Resources</h4>
                <ul>
                    <li><a href="https://api.nasa.gov/" target="_blank">NASA Open APIs</a></li>
                    <li><a href="https://github.com/mudejayaprakash/Spacetrack-nasa-explorer" target="_blank">GitHub Repository</a></li>
                    <li><a href="https://www.nasa.gov/" target="_blank">NASA Official Site</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            &copy; 2025 SpaceTrack - NASA Space Data Explorer | All rights reserved | ISM 6225 Project
        </div>
    </footer>

    <!-- Botpress Chatbot -->
    <script src="https://cdn.botpress.cloud/webchat/v3.3/inject.js" defer></script>
    <script src="https://files.bpcontent.cloud/2025/10/16/14/20251016142442-JV2BQMNJ.js" defer></script>

    <!-- JavaScript -->
    <script src="./js/config.js"></script>
    <script src="./js/api.js"></script>
    <script src="./js/main.js"></script>
    <script>
        // Load data from backend on page load
        document.addEventListener('DOMContentLoaded', async function() {
            await loadDashboardData();
        });

        async function loadDashboardData() {
            try {
                // Load activities
                const activitiesResponse = await ActivityAPI.getAll();
                if (activitiesResponse.success) {
                    const activities = activitiesResponse.data;
                    
                    // Update stats
                    document.getElementById('heroActivities').textContent = activities.length;
                    document.getElementById('totalActivities').textContent = activities.length;
                    
                    const imageCount = activities.filter(a => a.type === 'image').length;
                    document.getElementById('totalImages').textContent = imageCount;
                    
                    const observationCount = activities.filter(a => a.type === 'observation').length;
                    document.getElementById('totalObservations').textContent = observationCount;
                    
                    // Show quick stats
                    document.getElementById('quickStats').style.display = 'flex';
                    
                    // Load recent activities
                    loadRecentActivities(activities);
                }

                // Load missions
                const missionsResponse = await MissionAPI.getAll();
                if (missionsResponse.success) {
                    const missions = missionsResponse.data;
                    document.getElementById('heroMissions').textContent = missions.length;
                    document.getElementById('totalMissions').textContent = missions.length;
                    
                    // Load missions grid
                    loadMissionsGrid(missions);
                }
            } catch (error) {
                console.error('âŒ Error loading dashboard data:', error);
            }
        }

        function loadRecentActivities(activities) {
            const tbody = document.querySelector('#recentActivitiesTable tbody');
            const recentActivities = [...activities]
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 5);

            if (recentActivities.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                            No activities yet. <a href="./crud/create.html" style="color: var(--primary);">Create your first activity</a>
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = recentActivities.map(activity => `
                <tr>
                    <td><span class="badge">#${activity.id}</span></td>
                    <td>Mission ${activity.missionId}</td>
                    <td style="text-transform: capitalize;">${activity.type}</td>
                    <td>${activity.title}</td>
                    <td>${activity.date}</td>
                </tr>
            `).join('');
        }

        function loadMissionsGrid(missions) {
            const grid = document.getElementById('missionsGrid');
            const activeMissions = missions.filter(m => m.status === 'Active');

            if (activeMissions.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 2rem;">
                        <p style="color: var(--text-muted);">No active missions found</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = activeMissions.map(mission => `
                <div style="background: rgba(15, 23, 42, 0.6); padding: 1.5rem; border-radius: 0.75rem; border: 1px solid var(--border-color); transition: all 0.3s ease;">
                    <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem;">
                        <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.25rem;">
                            ðŸš€
                        </div>
                        <div style="flex: 1;">
                            <h3 style="margin: 0; font-size: 1rem; color: var(--text-light);">${mission.name}</h3>
                            <p style="margin: 0; font-size: 0.8rem; color: var(--text-muted);">${mission.type}</p>
                        </div>
                    </div>
                    <p style="font-size: 0.85rem; color: var(--text-muted); margin: 0; line-height: 1.5;">
                        ${mission.description.substring(0, 80)}...
                    </p>
                    <div style="margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                        <span style="font-size: 0.75rem; color: var(--text-muted);">
                            <i class="fa-solid fa-calendar"></i> ${mission.launchDate}
                        </span>
                        <span style="font-size: 0.75rem; padding: 0.25rem 0.5rem; background: rgba(16, 185, 129, 0.2); color: #10b981; border-radius: 0.25rem;">
                            ${mission.status}
                        </span>
                    </div>
                </div>
            `).join('');
        }

        console.log('âœ… Home page initialized with backend connection');
    </script>
</body>
</html>