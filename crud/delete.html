<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Delete Activity • SpaceTrack</title>

  <!-- Font Awesome (icons) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Your shared site CSS (adjust path if needed) -->
  <link rel="stylesheet" href="../css/style.css" />

  <!-- Page-specific styles (kept light; relies on shared style.css) -->
  <style>
    body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(to bottom,#0f172a,#1e1b4b,#000);color:#f8fafc;}
    /* Navbar (mirrors index) */
    .site-header{background:linear-gradient(90deg,#4338ca,#7c3aed,#000);position:sticky;top:0;z-index:1000;box-shadow:0 4px 6px rgba(0,0,0,.3)}
    .nav{max-width:1200px;margin:0 auto;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center;gap:1rem}
    .logo{display:flex;align-items:center;gap:.5rem;font-weight:700;text-decoration:none;color:#fff;font-size:1.4rem}
    .nav-links{list-style:none;display:flex;gap:1.25rem;align-items:center;margin:0;padding:0}
    .nav-links a{color:#fff;text-decoration:none;font-weight:500;padding:.45rem .6rem;border-radius:.6rem}
    .nav-links a:hover{background:rgba(255,255,255,.08)}
    .crud{position:relative}
    .crud-toggle{background:rgba(255,255,255,.08);border:0;color:#fff;border-radius:.6rem;padding:.45rem .6rem;cursor:pointer}
    .crud-menu{display:none;position:absolute;top:120%;right:0;min-width:220px;background:#1e1b4b;border:1px solid rgba(255,255,255,.15);border-radius:.6rem;padding:.25rem;box-shadow:0 12px 30px rgba(0,0,0,.25)}
    .crud-menu a{display:block;color:#fff}
    .crud-menu a:hover{background:rgba(255,255,255,.08)}

    /* Layout */
    .container{max-width:1100px;margin:0 auto;padding:2rem}
    .breadcrumbs{margin-bottom:1rem;color:#94a3b8}
    .breadcrumbs a{color:#93c5fd;text-decoration:none}

    .card{background:rgba(30,41,59,.8);backdrop-filter:blur(10px);border-radius:1rem;padding:2rem;border:1px solid rgba(79,70,229,.3);box-shadow:0 10px 30px rgba(79,70,229,.15)}
    .card h1{margin:0 0 .75rem 0}
    .muted{color:#94a3b8}
    .summary{background:#0b1220;border:1px solid #334155;border-radius:.7rem;padding:1rem;margin-top:1rem}
    .summary ul{list-style:none;margin:0;padding:0}
    .summary li{padding:.35rem 0;border-bottom:1px dashed rgba(148,163,184,.2)}
    .summary li:last-child{border-bottom:0}

    .row{display:flex;gap:1rem;flex-wrap:wrap;margin-top:1.25rem}
    .btn{border:0;border-radius:.7rem;padding:.7rem 1rem;cursor:pointer;font-weight:600;display:inline-flex;align-items:center;gap:.5rem;text-decoration:none}
    .btn-danger{background:#ef4444;color:#fff;box-shadow:0 10px 25px rgba(239,68,68,.25)}
    .btn-outline{background:transparent;color:#93c5fd;border:1px solid #334155}
    .success{margin-top:1rem;background:rgba(16,185,129,.12);border:1px solid rgba(16,185,129,.35);color:#bbf7d0;padding:.8rem 1rem;border-radius:.6rem;display:none}
    .error{margin-top:1rem;background:rgba(239,68,68,.12);border:1px solid rgba(239,68,68,.35);color:#fecaca;padding:.8rem 1rem;border-radius:.6rem;display:none}
  </style>

  <!-- CRUD simulator -->
  <script src="../js/crud-sim.js"></script>
</head>
<body>

<header class="site-header">
  <nav class="nav">
    <a class="logo" href="../index.html"><i class="fas fa-rocket"></i> SpaceTrack</a>
    <ul class="nav-links">
      <li><a href="../index.html"><i class="fas fa-home"></i> Home</a></li>
      <li><a href="../data-visualization.html"><i class="fas fa-chart-bar"></i> Data Dashboard</a></li>
      <li><a href="../about.html"><i class="fas fa-users"></i> About Us</a></li>
      <li class="crud">
        <button class="crud-toggle" aria-haspopup="true" aria-expanded="false">CRUD ▾</button>
        <ul class="crud-menu">
          <li><a href="./create.html">Create</a></li>
          <li><a href="./read.html">Read</a></li>
          <li><a href="./update.html">Update</a></li>
          <li><a href="./delete.html">Delete</a></li>
        </ul>
      </li>
    </ul>
  </nav>
</header>

<main class="container">

  <div class="breadcrumbs">
    <a href="../index.html">Home</a> / <a href="./read.html">Activities</a> / Delete
  </div>

  <div class="card">
    <h1>Delete Activity</h1>
    <p class="muted">This simulates <strong>Delete</strong>. In the final MVC app, <em>Confirm Delete</em> will remove the record from the database and refresh tables & charts.</p>

    <div id="summary" class="summary"></div>

    <div class="row">
      <button id="confirm" class="btn btn-danger"><i class="fas fa-trash"></i> Confirm Delete</button>
      <a class="btn btn-outline" href="./read.html"><i class="fas fa-arrow-left"></i> Cancel</a>
    </div>

    <div id="msgOk" class="success"><i class="fas fa-check-circle"></i> Deleted.</div>
    <div id="msgErr" class="error"><i class="fas fa-circle-exclamation"></i> Could not delete.</div>
  </div>

</main>

<script>
  // Helpers
  function qp(name){ return new URL(location.href).searchParams.get(name); }

  // Load activity
  const idParam = qp('id');
  const list = window.CRUD.listActivities();
  let activity = null;

  if(idParam){
    const id = Number(idParam);
    activity = list.find(a => a.id === id) || null;
  }
  // Fallback to the first activity if id is missing/invalid
  if(!activity && list.length){
    activity = list[0];
  }

  const summaryEl = document.getElementById('summary');
  const okEl = document.getElementById('msgOk');
  const errEl = document.getElementById('msgErr');
  const confirmBtn = document.getElementById('confirm');

  if(activity){
    summaryEl.innerHTML = `
      <ul>
        <li><strong>ID:</strong> ${activity.id}</li>
        <li><strong>Mission:</strong> ${window.CRUD.missionName(activity.missionId)}</li>
        <li><strong>Type:</strong> ${activity.type}</li>
        <li><strong>Date:</strong> ${activity.date}</li>
        <li><strong>Title:</strong> ${activity.title}</li>
      </ul>`;
  }else{
    summaryEl.innerHTML = `<p class="muted">No activity selected. Return to <a href="./read.html">Read</a> and choose an item.</p>`;
    confirmBtn.disabled = true;
  }

  confirmBtn.addEventListener('click', ()=>{
    if(!activity) return;
    const success = window.CRUD.deleteActivity(activity.id);
    if(success){
      okEl.innerHTML = `<i class="fas fa-check-circle"></i> Deleted activity <strong>#${activity.id}</strong>. (Will persist in final app.)`;
      okEl.style.display = 'block';
      errEl.style.display = 'none';
    }else{
      errEl.style.display = 'block';
      okEl.style.display = 'none';
    }
  });

  // Navbar CRUD dropdown
  const btn=document.querySelector('.crud-toggle');
  const menu=document.querySelector('.crud-menu');
  if(btn && menu){
    btn.addEventListener('click',(ev)=>{
      ev.stopPropagation();
      const open = menu.style.display==='block';
      menu.style.display = open ? 'none' : 'block';
      btn.setAttribute('aria-expanded', String(!open));
    });
    document.addEventListener('click', ()=>{
      menu.style.display='none';
      btn.setAttribute('aria-expanded','false');
    });
  }
</script>

</body>
</html>

